<!DOCTYPE html> 
<html> 
    <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <title>Inicio</title>
        <!-- JQuery library-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
        <!-- Popper JS -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        <!-- JQuery Cookie -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" integrity="sha512-3j3VU6WC5rPQB4Ld1jnLV7Kd5xr+cq9avvhwqzbH/taCRNURoeEpoPBK9pDyeukwSxwRPJ8fDgvYXd6SkaZ2TA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- Para Google One Tap -->
        <script src="https://accounts.google.com/gsi/client" async defer></script> 
        <!-- Socket.io -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.js" integrity="sha512-8BHxHDLsOHx+flIrQ0DrZcea7MkHqRU5GbTHmbdzMRnAaoCIkZ97PqZcXJkKZckMMhqfoeaJE+DNUVuyoQsO3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </head> 
    <body> 
        <div 
        id="g_id_onload" 
        data-client_id="PLACEHOLDER_CLIENT_ID"
        data-login_uri="PLACEHOLDER_LOGIN_URI" 
        data-skip_prompt_cookie="nick" 
        ></div>

        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <!-- Brand/logo -->
            <a class="navbar-brand" href="#">Procesos2526</a>

            <!-- Links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" id="linkInicioSesion">Inicio sesión</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="linkPartidas">Partidas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="linkAcciones">Acciones</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="linkAcercaDe">Acerca de</a>
                </li>
            </ul>
        </nav>

        <div class="container-fluid mt-3">
            <div id="mensajes"></div>
            <div id="notificaciones"></div>
            
            <!-- Sección Inicio Sesión -->
            <div id="seccionInicioSesion" style="display:none;">
                <h3 id="tituloAutenticacion">Sistema de Autenticación</h3>
                <div class="row">
                    <div class="col-md-6 offset-md-3">
                        <!-- Botón de Google Sign-In personalizado -->
                        <div class="mb-3 text-center" id="googleSignInContainer">
                            <div id="g_id_signin" 
                                 data-type="standard"
                                 data-size="large"
                                 data-theme="outline"
                                 data-text="signin_with"
                                 data-shape="rectangular"
                                 data-logo_alignment="left"
                                 data-width="280"
                                 data-client_id="PLACEHOLDER_CLIENT_ID"
                                 data-login_uri="PLACEHOLDER_LOGIN_URI">
                            </div>
                        </div>
                        <hr id="separadorAuth">
                        <div id="login"></div>
                        <div id="registro"></div>
                    </div>
                </div>
            </div>

            <!-- Sección Partidas -->
            <div id="seccionPartidas" style="display:none;">
                <h3>Partidas</h3>
                
                <!-- Cards de crear/unirse -->
                <div id="cardsPartidas" class="row">
                    <!-- Card para crear partida -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h5>Crear Nueva Partida</h5>
                            </div>
                            <div class="card-body">
                                <p>Crea una partida y espera a que otro jugador se una.</p>
                                <button id="btnCrearPartida" class="btn btn-success btn-block">Crear Partida</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card para unirse a partidas -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h5>Partidas Disponibles</h5>
                            </div>
                            <div class="card-body">
                                <p>Únete a una partida existente.</p>
                                <div id="listaPartidas"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Estado de partida actual (oculto inicialmente) -->
                <div id="estadoPartidaActual" style="display:none;">
                    <div class="card">
                        <div class="card-body">
                            <div id="estadoPartida"></div>
                            <button id="btnAbandonarPartida" class="btn btn-danger mt-3">Abandonar Partida</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Acciones -->
            <div id="seccionAcciones" style="display:none;">
                <h3>Gestión de Usuarios</h3>
                <p>Acciones disponibles para gestionar usuarios del sistema.</p>
                <div class="row">
                    <div class="col-md-5">
                        <div id="left-cards"></div>
                    </div>
                    <div class="col-md-7">
                        <div id="right-cards"></div>
                    </div>
                </div>
            </div>

            <!-- Sección Acerca de -->
            <div id="seccionAcercaDe" style="display:none;">
                <h3>Acerca de</h3>
                <p>Esta aplicación permite gestionar usuarios de forma sencilla utilizando Node.js, MongoDB y autenticación con Google OAuth.</p>
                <h5>Características:</h5>
                <ul>
                    <li>Registro de usuarios locales con confirmación por email</li>
                    <li>Inicio de sesión con Google OAuth 2.0</li>
                    <li>Google One Tap para acceso rápido</li>
                    <li>Gestión completa de usuarios (agregar, eliminar, listar)</li>
                    <li>Contraseñas cifradas con bcrypt</li>
                </ul>
            </div>
        </div>


        <script src="./cliente/clienteRest.js"></script>
        <script src="./cliente/clienteWS.js"></script>
        <script src="./cliente/controlWeb.js"></script>

        <script>
            rest=new ClienteRest();
            ws=new ClienteWS();
            cw=new ControlWeb();
            
            // Inicializar navegación
            cw.inicializarNavegacion();
            
            // Comprobar sesión
            cw.comprobarSesion();
            
            // Inicializar las cards de acciones (ocultas por defecto)
            cw.mostrarAgregarUsuario();
            cw.mostrarEliminarUsuario();
            cw.mostrarUsuarioActivo();
            cw.mostrarNumeroUsuarios();
            cw.mostrarObtenerUsuarios();
        </script>
    </body> 
</html> 